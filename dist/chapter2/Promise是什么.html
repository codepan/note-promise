<!DOCTYPE HTML><html><head><meta charset=UTF-8><meta content="text/html; charset=utf-8" http-equiv=Content-Type><title>2.1 Promise是什么 · GitBook</title><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=description content=""><meta name=generator content="GitBook 3.2.3"><link rel=stylesheet href=../gitbook/style.css><link rel=stylesheet href=../gitbook/gitbook-plugin-highlight/website.css><link rel=stylesheet href=../gitbook/gitbook-plugin-search/search.css><link rel=stylesheet href=../gitbook/gitbook-plugin-fontsettings/website.css><meta name=HandheldFriendly content=true><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black><link rel=apple-touch-icon-precomposed sizes=152x152 href=../gitbook/images/apple-touch-icon-precomposed-152.png><link rel="shortcut icon" href=../gitbook/images/favicon.ico type=image/x-icon><link rel=next href=为何要用Promise.html><link rel=prev href=./ ></head><body><div class=book><div class=book-summary><div id=book-search-input role=search><input type=text placeholder="Type to search"></div><nav role=navigation><ul class=summary><li class=chapter data-level=1.1 data-path=../ ><a href=../ >Introduction</a></li><li class=chapter data-level=1.2><span>第1章 前期准备</span><ul class=articles><li class=chapter data-level=1.2.1 data-path=../chapter1/实例对象与函数对象.html><a href=../chapter1/实例对象与函数对象.html>1.1 实例对象与函数对象</a></li><li class=chapter data-level=1.2.2 data-path=../chapter1/回调函数的种类.html><a href=../chapter1/回调函数的种类.html>1.2 回调函数的种类</a></li><li class=chapter data-level=1.2.3 data-path=../chapter1/js中的Error.html><a href=../chapter1/js中的Error.html>1.3 js中的Error</a></li></ul></li><li class=chapter data-level=1.3 data-path=./ ><a href=./ >Promise理解和使用</a><ul class=articles><li class="chapter active" data-level=1.3.1 data-path=Promise是什么.html><a href=Promise是什么.html>2.1 Promise是什么</a></li><li class=chapter data-level=1.3.2 data-path=为何要用Promise.html><a href=为何要用Promise.html>2.2 为何要用Promise</a></li><li class=chapter data-level=1.3.3 data-path=如何使用Promise.html><a href=如何使用Promise.html>2.3 如何使用Promise</a></li></ul></li><li class=chapter data-level=1.4><span>第3章 手写Promise</span><ul class=articles><li class=chapter data-level=1.4.1 data-path=../chapter3/初步实现.html><a href=../chapter3/初步实现.html>3.1 初步实现</a></li><li class=chapter data-level=1.4.2 data-path=../chapter3/处理异常.html><a href=../chapter3/处理异常.html>3.3 处理异常</a></li><li class=chapter data-level=1.4.3 data-path=../chapter3/处理多回调及异步.html><a href=../chapter3/处理多回调及异步.html>3.3 处理多回调及异步</a></li><li class=chapter data-level=1.4.4 data-path=../chapter3/链式调用.html><a href=../chapter3/链式调用.html>3.4 链式调用</a></li><li class=chapter data-level=1.4.5 data-path=../chapter3/处理多次调用及可选参数.html><a href=../chapter3/处理多次调用及可选参数.html>3.5 处理多次调用及可选参数</a></li><li class=chapter data-level=1.4.6 data-path=../chapter3/其它功能的实现.html><a href=../chapter3/其它功能的实现.html>3.5 其它功能的实现</a></li></ul></li><li class=divider></li><li><a href=https://www.gitbook.com target=blank class=gitbook-link>Published with GitBook</a></li></ul></nav></div><div class=book-body><div class=body-inner><div class=book-header role=navigation><h1><i class="fa fa-circle-o-notch fa-spin"></i><a href=..>2.1 Promise是什么</a></h1></div><div class=page-wrapper tabindex=-1 role=main><div class=page-inner><div id=book-search-results><div class=search-noresults><section class="normal markdown-section"><h1 id=&#x7406;&#x89E3;>&#x7406;&#x89E3;</h1><ul><li>&#x62BD;&#x8C61;&#x8868;&#x8FBE;&#xFF1A;Promise&#x662F;js&#x4E2D;&#x8FDB;&#x884C;&#x5F02;&#x6B65;&#x7F16;&#x7A0B;&#x7684;&#x65B0;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF08;&#x65E7;&#x7684;&#x662F;&#x8C01;&#xFF1F;&#xFF09;<ul><li>&#x591A;&#x4E2A;&#x5F02;&#x6B65;&#x4E32;&#x884C;&#x95EE;&#x9898;&#xFF0C;&#x94FE;&#x5F0F;&#x8C03;&#x7528;&#xFF08;&#x4F9D;&#x7136;&#x8FD8;&#x662F;&#x57FA;&#x4E8E;&#x56DE;&#x8C03;&#x7684;&#xFF09;</li><li>&#x591A;&#x4E2A;&#x5F02;&#x6B65;&#x5E76;&#x53D1;&#x95EE;&#x9898;&#xFF0C;&#x540C;&#x65F6;&#x62FF;&#x5230;&#x591A;&#x4E2A;&#x5F02;&#x6B65;&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C; Promise.all</li></ul></li><li>&#x5177;&#x4F53;&#x8868;&#x8FBE;&#xFF1A;<ul><li>&#x4ECE;&#x8BED;&#x6CD5;&#x5C42;&#x9762;&#xFF1A;Promise&#x662F;&#x4E00;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;</li><li>&#x4ECE;&#x529F;&#x80FD;&#x5C42;&#x9762;&#xFF1A;Promise&#x5B9E;&#x4F8B;&#x7528;&#x6765;&#x5C01;&#x88C5;&#x4E00;&#x4E2A;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x5E76;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5176;&#x7ED3;&#x679C;</li></ul></li></ul><h1 id=promise&#x7684;&#x72B6;&#x6001;>promise&#x7684;&#x72B6;&#x6001;</h1><p>promise&#x5171;&#x6709;&#x4E09;&#x79CD;&#x72B6;&#x6001;&#xFF1A;</p><ul><li>pending &#x521D;&#x59CB;&#x6001;&#x3001;&#x672A;&#x77E5;&#x6001;</li><li>fulfilled &#x6210;&#x529F;&#x6001;&#x3001;&#x89E3;&#x51B3;&#x6001;</li><li>rejected &#x5931;&#x8D25;&#x6001;&#x3001;&#x62D2;&#x7EDD;&#x6001;</li></ul><p>&#x72B6;&#x6001;&#x7684;&#x53D8;&#x5316;&#xFF1A;</p><ul><li>pending -&gt; fulfilled</li><li>pending -&gt; rejected</li></ul><p>&#x8BF4;&#x660E;: &#x53EA;&#x6709;&#x8FD9;2&#x79CD;&#x53D8;&#x5316;, &#x4E14;&#x4E00;&#x4E2A; promise &#x5BF9;&#x8C61;&#x7684;&#x72B6;&#x6001;&#x53EA;&#x80FD;&#x6539;&#x53D8;&#x4E00;&#x6B21; &#x65E0;&#x8BBA;&#x53D8;&#x4E3A;&#x6210;&#x529F;&#x8FD8;&#x662F;&#x5931;&#x8D25;, &#x90FD;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x7ED3;&#x679C;&#x6570;&#x636E; &#x6210;&#x529F;&#x7684;&#x7ED3;&#x679C;&#x6570;&#x636E;&#x4E00;&#x822C;&#x79F0;&#x4E3A; vlaue, &#x5931;&#x8D25;&#x7684;&#x7ED3;&#x679C;&#x6570;&#x636E;&#x4E00;&#x822C;&#x79F0;&#x4E3A;reason</p><h1 id=promise&#x7684;&#x57FA;&#x672C;&#x6D41;&#x7A0B;>promise&#x7684;&#x57FA;&#x672C;&#x6D41;&#x7A0B;</h1><p><img src=../assets/WX20191213-101649@2x.png alt=""></p><h1 id=promise&#x7684;&#x57FA;&#x672C;&#x4F7F;&#x7528;>promise&#x7684;&#x57FA;&#x672C;&#x4F7F;&#x7528;</h1><pre><code class=lang-js><span class=hljs-comment>// &#x521B;&#x5EFA;Promise&#x5B9E;&#x4F8B;promise</span>
<span class=hljs-keyword>const</span> promise = <span class=hljs-keyword>new</span> <span class=hljs-built_in>Promise</span>((resolve, reject) =&gt; {
  <span class=hljs-comment>// &#x6267;&#x884C;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;</span>
  setTimeout(() =&gt; {
    <span class=hljs-keyword>const</span> time = <span class=hljs-built_in>Date</span>.now() <span class=hljs-comment>// &#x5982;&#x679C;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x662F;&#x5947;&#x6570;&#x4EE3;&#x8868;&#x6210;&#x529F;&#xFF0C;&#x5076;&#x6570;&#x4EE3;&#x8868;&#x5931;&#x8D25;</span>

    <span class=hljs-keyword>if</span> (time % <span class=hljs-number>2</span> === <span class=hljs-number>1</span>) {
      <span class=hljs-comment>// &#x5982;&#x679C;&#x6210;&#x529F;&#x4E86;&#xFF0C;&#x8C03;&#x7528;resolve(value)</span>
      resolve(<span class=hljs-string>&apos;&#x6210;&#x529F;&#x7684;&#x6570;&#x636E;&apos;</span> + time)
    } <span class=hljs-keyword>else</span> {
      <span class=hljs-comment>// &#x5982;&#x679C;&#x5931;&#x8D25;&#x4E86;&#xFF0C;&#x8C03;&#x7528;reject(reason)</span>
      reject(<span class=hljs-string>&apos;&#x5931;&#x8D25;&#x7684;&#x6570;&#x636E;&apos;</span> + time)
    }
  }, <span class=hljs-number>1000</span>)
})

<span class=hljs-comment>// &#x901A;&#x8FC7;promise&#x7684;then()&#x6307;&#x5B9A;&#x6210;&#x529F;&#x548C;&#x5931;&#x8D25;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;</span>
promise.then(value =&gt; {
  <span class=hljs-built_in>console</span>.log(<span class=hljs-string>&apos;&#x6210;&#x529F;&#x7684;&#x56DE;&#x8C03;, value:&apos;</span>, value)
}, reason =&gt; {
  <span class=hljs-built_in>console</span>.log(<span class=hljs-string>&apos;&#x5931;&#x8D25;&#x7684;&#x56DE;&#x8C03;, reason:&apos;</span>, reason)
})
</code></pre></section></div><div class=search-results><div class=has-results><h1 class=search-results-title><span class=search-results-count></span>results matching "<span class=search-query></span>"</h1><ul class=search-results-list></ul></div><div class=no-results><h1 class=search-results-title>No results matching "<span class=search-query></span>"</h1></div></div></div></div></div></div><a href=./ class="navigation navigation-prev" aria-label="Previous page: Promise理解和使用"><i class="fa fa-angle-left"></i></a><a href=为何要用Promise.html class="navigation navigation-next" aria-label="Next page: 2.2 为何要用Promise"><i class="fa fa-angle-right"></i></a></div><script>var gitbook=gitbook||[];gitbook.push(function(){gitbook.page.hasChanged({page:{title:"2.1 Promise是什么",level:"1.3.1",depth:2,next:{title:"2.2 为何要用Promise",level:"1.3.2",depth:2,path:"chapter2/为何要用Promise.md",ref:"chapter2/为何要用Promise.md",articles:[]},previous:{title:"Promise理解和使用",level:"1.3",depth:1,path:"chapter2/README.md",ref:"chapter2/README.md",articles:[{title:"2.1 Promise是什么",level:"1.3.1",depth:2,path:"chapter2/Promise是什么.md",ref:"chapter2/Promise是什么.md",articles:[]},{title:"2.2 为何要用Promise",level:"1.3.2",depth:2,path:"chapter2/为何要用Promise.md",ref:"chapter2/为何要用Promise.md",articles:[]},{title:"2.3 如何使用Promise",level:"1.3.3",depth:2,path:"chapter2/如何使用Promise.md",ref:"chapter2/如何使用Promise.md",articles:[]}]},dir:"ltr"},config:{gitbook:"*",theme:"default",variables:{},plugins:[],pluginsConfig:{highlight:{},search:{},lunr:{maxIndexSize:1e6,ignoreSpecialCharacters:!1},sharing:{facebook:!0,twitter:!0,google:!1,weibo:!1,instapaper:!1,vk:!1,all:["facebook","google","twitter","weibo","instapaper"]},fontsettings:{theme:"white",family:"sans",size:2},"theme-default":{styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},showLevel:!1}},structure:{langs:"LANGS.md",readme:"README.md",glossary:"GLOSSARY.md",summary:"SUMMARY.md"},pdf:{pageNumbers:!0,fontSize:12,fontFamily:"Arial",paperSize:"a4",chapterMark:"pagebreak",pageBreaksBefore:"/",margin:{right:62,left:62,top:56,bottom:56}},styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"}},file:{path:"chapter2/Promise是什么.md",mtime:"2020-08-20T08:14:09.229Z",type:"markdown"},gitbook:{version:"3.2.3",time:"2020-08-20T08:23:33.468Z"},basePath:"..",book:{language:""}})})</script></div><script src=../gitbook/gitbook.js></script><script src=../gitbook/theme.js></script><script src=../gitbook/gitbook-plugin-search/search-engine.js></script><script src=../gitbook/gitbook-plugin-search/search.js></script><script src=../gitbook/gitbook-plugin-lunr/lunr.min.js></script><script src=../gitbook/gitbook-plugin-lunr/search-lunr.js></script><script src=../gitbook/gitbook-plugin-sharing/buttons.js></script><script src=../gitbook/gitbook-plugin-fontsettings/fontsettings.js></script></body></html>