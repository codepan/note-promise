<!DOCTYPE HTML><html><head><meta charset=UTF-8><meta content="text/html; charset=utf-8" http-equiv=Content-Type><title>2.3 如何使用Promise · GitBook</title><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=description content=""><meta name=generator content="GitBook 3.2.3"><link rel=stylesheet href=../gitbook/style.css><link rel=stylesheet href=../gitbook/gitbook-plugin-highlight/website.css><link rel=stylesheet href=../gitbook/gitbook-plugin-search/search.css><link rel=stylesheet href=../gitbook/gitbook-plugin-fontsettings/website.css><meta name=HandheldFriendly content=true><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=no"><meta name=apple-mobile-web-app-capable content=yes><meta name=apple-mobile-web-app-status-bar-style content=black><link rel=apple-touch-icon-precomposed sizes=152x152 href=../gitbook/images/apple-touch-icon-precomposed-152.png><link rel="shortcut icon" href=../gitbook/images/favicon.ico type=image/x-icon><link rel=prev href=为何要用Promise.html></head><body><div class=book><div class=book-summary><div id=book-search-input role=search><input type=text placeholder="Type to search"></div><nav role=navigation><ul class=summary><li class=chapter data-level=1.1 data-path=../ ><a href=../ >Introduction</a></li><li class=chapter data-level=1.2><span>第1章 前期准备</span><ul class=articles><li class=chapter data-level=1.2.1 data-path=../chapter1/实例对象与函数对象.html><a href=../chapter1/实例对象与函数对象.html>1.1 实例对象与函数对象</a></li><li class=chapter data-level=1.2.2 data-path=../chapter1/回调函数的种类.html><a href=../chapter1/回调函数的种类.html>1.2 回调函数的种类</a></li><li class=chapter data-level=1.2.3 data-path=../chapter1/js中的Error.html><a href=../chapter1/js中的Error.html>1.3 js中的Error</a></li></ul></li><li class=chapter data-level=1.3 data-path=./ ><a href=./ >Promise理解和使用</a><ul class=articles><li class=chapter data-level=1.3.1 data-path=Promise是什么.html><a href=Promise是什么.html>2.1 Promise是什么</a></li><li class=chapter data-level=1.3.2 data-path=为何要用Promise.html><a href=为何要用Promise.html>2.2 为何要用Promise</a></li><li class="chapter active" data-level=1.3.3 data-path=如何使用Promise.html><a href=如何使用Promise.html>2.3 如何使用Promise</a></li></ul></li><li class=chapter data-level=1.4><span>第3章 手写Promise</span><ul class=articles><li class=chapter data-level=1.4.1 data-path=../chapter3/初步实现.html><a href=../chapter3/初步实现.html>3.1 初步实现</a></li><li class=chapter data-level=1.4.2 data-path=../chapter3/处理异常.html><a href=../chapter3/处理异常.html>3.3 处理异常</a></li><li class=chapter data-level=1.4.3 data-path=../chapter3/处理多回调及异步.html><a href=../chapter3/处理多回调及异步.html>3.3 处理多回调及异步</a></li><li class=chapter data-level=1.4.4 data-path=../chapter3/链式调用.html><a href=../chapter3/链式调用.html>3.4 链式调用</a></li><li class=chapter data-level=1.4.5 data-path=../chapter3/处理多次调用及可选参数.html><a href=../chapter3/处理多次调用及可选参数.html>3.5 处理多次调用及可选参数</a></li><li class=chapter data-level=1.4.6 data-path=../chapter3/其它功能的实现.html><a href=../chapter3/其它功能的实现.html>3.5 其它功能的实现</a></li></ul></li><li class=divider></li><li><a href=https://www.gitbook.com target=blank class=gitbook-link>Published with GitBook</a></li></ul></nav></div><div class=book-body><div class=body-inner><div class=book-header role=navigation><h1><i class="fa fa-circle-o-notch fa-spin"></i><a href=..>2.3 如何使用Promise</a></h1></div><div class=page-wrapper tabindex=-1 role=main><div class=page-inner><div id=book-search-results><div class=search-noresults><section class="normal markdown-section"><h1 id=api>API</h1><p><strong><em>Promise&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF1A;<code>Promise(executor) {}</code></em></strong></p><ul><li>executor&#x51FD;&#x6570;&#xFF1A;&#x6267;&#x884C;&#x5668;<code>(resolve, reject) =&gt; {}</code></li><li>resolve&#x51FD;&#x6570;&#xFF1A;&#x5185;&#x90E8;&#x5B9A;&#x4E49;&#x6210;&#x529F;&#x65F6;&#x6211;&#x4EEC;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;<code>value =&gt; {}</code></li><li>reject&#x51FD;&#x6570;&#xFF1A;&#x5185;&#x90E8;&#x5B9A;&#x4E49;&#x5931;&#x8D25;&#x65F6;&#x6211;&#x4EEC;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;<code>reason =&gt; {}</code></li></ul><p>&#x8BF4;&#x660E;&#xFF1A;executor&#x4F1A;&#x5728;Promise&#x5185;&#x90E8;&#x7ACB;&#x5373;&#x540C;&#x6B65;&#x56DE;&#x8C03;&#xFF0C;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x5728;&#x6267;&#x884C;&#x5668;&#x4E2D;&#x6267;&#x884C;</p><p><strong><em>Promise.prototype.then&#xFF1A;(onFulfilled, onRejected) =&gt; {}</em></strong></p><ul><li>onFulfilled &#x51FD;&#x6570;: &#x6210;&#x529F;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570; value =&gt; {}</li><li>onRejected &#x51FD;&#x6570;: &#x5931;&#x8D25;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570; reason =&gt; {}</li></ul><p>&#x8BF4;&#x660E;: &#x6307;&#x5B9A;&#x7528;&#x4E8E;&#x5F97;&#x5230;&#x6210;&#x529F; value &#x7684;&#x6210;&#x529F;&#x56DE;&#x8C03;&#x548C;&#x7528;&#x4E8E;&#x5F97;&#x5230;&#x5931;&#x8D25; reason &#x7684;&#x5931;&#x8D25;&#x56DE;&#x8C03;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684; promise &#x5BF9;&#x8C61;</p><p><strong><em>Promise.prototype.catch&#xFF1A;onRejected =&gt; {}</em></strong></p><ul><li>onRejected &#x51FD;&#x6570;: &#x5931;&#x8D25;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570; reason =&gt; {}</li></ul><p>&#x8BF4;&#x660E;: then()&#x7684;&#x8BED;&#x6CD5;&#x7CD6;, &#x76F8;&#x5F53;&#x4E8E;: then(undefined, onRejected)</p><p><strong><em>Promise.resolve: value =&gt; {}</em></strong></p><ul><li>value: &#x6210;&#x529F;&#x7684;&#x6570;&#x636E;&#x6216; promise &#x5BF9;&#x8C61;</li></ul><p>&#x8BF4;&#x660E;: &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x6210;&#x529F;/&#x5931;&#x8D25;&#x7684; promise &#x5BF9;&#x8C61;</p><p><strong><em>Promise.reject: reason =&gt; {}</em></strong></p><ul><li>reason: &#x5931;&#x8D25;&#x7684;&#x539F;&#x56E0;</li></ul><p>&#x8BF4;&#x660E;: &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5931;&#x8D25;&#x7684; promise &#x5BF9;&#x8C61;</p><p><strong><em>Promise.all: promises =&gt; {}</em></strong></p><ul><li>promises: &#x5305;&#x542B; n &#x4E2A; promise &#x7684;&#x6570;&#x7EC4;</li></ul><p>&#x8BF4;&#x660E;: &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684; promise, &#x53EA;&#x6709;&#x6240;&#x6709;&#x7684; promise &#x90FD;&#x6210;&#x529F;&#x624D;&#x6210;&#x529F;, &#x53EA;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x5931;&#x8D25;&#x4E86;&#x5C31; &#x76F4;&#x63A5;&#x5931;&#x8D25;</p><p><strong><em>Promise.race: promises =&gt; {}</em></strong></p><ul><li>promises: &#x5305;&#x542B; n &#x4E2A; promise &#x7684;&#x6570;&#x7EC4;</li></ul><p>&#x8BF4;&#x660E;: &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684; promise, &#x7B2C;&#x4E00;&#x4E2A;&#x5B8C;&#x6210;&#x7684; promise &#x7684;&#x7ED3;&#x679C;&#x72B6;&#x6001;&#x5C31;&#x662F;&#x6700;&#x7EC8;&#x7684;&#x7ED3;&#x679C;&#x72B6;&#x6001;</p><h1 id=promise&#x7684;&#x51E0;&#x4E2A;&#x5173;&#x952E;&#x95EE;&#x9898;>promise&#x7684;&#x51E0;&#x4E2A;&#x5173;&#x952E;&#x95EE;&#x9898;</h1><p><strong>1. &#x5982;&#x4F55;&#x6539;&#x53D8;promise&#x7684;&#x72B6;&#x6001;</strong></p><ul><li>resolve(value)&#xFF1A;&#x5982;&#x679C;&#x5F53;&#x524D;&#x662F;pending&#x5C31;&#x4F1A;&#x53D8;&#x4E3A;fulfilled</li><li>reject(reson)&#xFF1A;&#x5982;&#x679C;&#x5F53;&#x524D;&#x662F;pending&#x5C31;&#x4F1A;&#x53D8;&#x4E3A;rejected</li><li>&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF1A;&#x5982;&#x679C;&#x5F53;&#x524D;&#x662F;pending&#x5C31;&#x4F1A;&#x53D8;&#x4E3A;rejected</li></ul><p><strong>2. &#x4E00;&#x4E2A;promise&#x6307;&#x5B9A;&#x591A;&#x4E2A;&#x6210;&#x529F;/&#x5931;&#x8D25;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x90FD;&#x4F1A;&#x8C03;&#x7528;&#x5417;&#xFF1F;</strong></p><p>&#x5F53;promise&#x6539;&#x53D8;&#x4E3A;&#x5BF9;&#x5E94;&#x72B6;&#x6001;&#x65F6;&#x90FD;&#x4F1A;&#x8C03;&#x7528;</p><p><strong>3. &#x6539;&#x53D8;promise&#x72B6;&#x6001;&#x548C;&#x6307;&#x5B9A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x8C01;&#x5148;&#x8C01;&#x540E;&#xFF1F;</strong></p><ul><li>&#x90FD;&#x6709;&#x53EF;&#x80FD;, &#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x5148;&#x6307;&#x5B9A;&#x56DE;&#x8C03;&#x518D;&#x6539;&#x53D8;&#x72B6;&#x6001;, &#x4F46;&#x4E5F;&#x53EF;&#x4EE5;&#x5148;&#x6539;&#x72B6;&#x6001;&#x518D;&#x6307;&#x5B9A;&#x56DE;&#x8C03;</li><li>&#x5982;&#x4F55;&#x5148;&#x6539;&#x72B6;&#x6001;&#x518D;&#x6307;&#x5B9A;&#x56DE;&#x8C03;?<ul><li>&#x5728;&#x6267;&#x884C;&#x5668;&#x4E2D;&#x76F4;&#x63A5;&#x8C03;&#x7528; resolve()/reject()</li><li>&#x5EF6;&#x8FDF;&#x66F4;&#x957F;&#x65F6;&#x95F4;&#x624D;&#x8C03;&#x7528; then()</li></ul></li><li>&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x624D;&#x80FD;&#x5F97;&#x5230;&#x6570;&#x636E;?<ul><li>&#x5982;&#x679C;&#x5148;&#x6307;&#x5B9A;&#x7684;&#x56DE;&#x8C03;, &#x90A3;&#x5F53;&#x72B6;&#x6001;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;, &#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5C31;&#x4F1A;&#x8C03;&#x7528;, &#x5F97;&#x5230;&#x6570;&#x636E;</li><li>&#x5982;&#x679C;&#x5148;&#x6539;&#x53D8;&#x7684;&#x72B6;&#x6001;, &#x90A3;&#x5F53;&#x6307;&#x5B9A;&#x56DE;&#x8C03;&#x65F6;, &#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5C31;&#x4F1A;&#x8C03;&#x7528;, &#x5F97;&#x5230;&#x6570;&#x636E;</li></ul></li></ul><p><strong>4. promise.then()&#x8FD4;&#x56DE;&#x7684;&#x65B0;promise&#x7684;&#x7ED3;&#x679C;&#x72B6;&#x6001;&#x7531;&#x4EC0;&#x4E48;&#x51B3;&#x5B9A;&#xFF1F;</strong></p><ul><li>&#x7B80;&#x5355;&#x8868;&#x8FBE;&#xFF1A;&#x7531;then()&#x6307;&#x5B9A;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x51B3;&#x5B9A;</li><li>&#x8BE6;&#x7EC6;&#x8868;&#x8FBE;&#xFF1A;<ul><li>&#x5982;&#x679C;&#x629B;&#x51FA;&#x5F02;&#x5E38;, &#x65B0; promise &#x53D8;&#x4E3A; rejected, reason &#x4E3A;&#x629B;&#x51FA;&#x7684;&#x5F02;&#x5E38;</li><li>&#x5982;&#x679C;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x975E; promise &#x7684;&#x4EFB;&#x610F;&#x503C;, &#x65B0; promise &#x53D8;&#x4E3A; resolved, value &#x4E3A;&#x8FD4;&#x56DE;&#x7684;&#x503C;</li><li>&#x5982;&#x679C;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x65B0; promise, &#x6B64; promise &#x7684;&#x7ED3;&#x679C;&#x5C31;&#x4F1A;&#x6210;&#x4E3A;&#x65B0; promise &#x7684;&#x7ED3;&#x679C;</li></ul></li></ul><p><strong>5. promise&#x5982;&#x4F55;&#x4E32;&#x8FDE;&#x591A;&#x4E2A;&#x64CD;&#x4F5C;&#x4EFB;&#x52A1;&#xFF1F;</strong></p><ul><li>promise &#x7684; then()&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684; promise, &#x53EF;&#x4EE5;&#x5F62;&#x6210; then()&#x7684;&#x94FE;&#x5F0F;&#x8C03;&#x7528;</li><li>&#x901A;&#x8FC7;then&#x7684;&#x94FE;&#x5F0F;&#x8C03;&#x7528;&#x4E32;&#x8FDE;&#x591A;&#x4E2A;&#x540C;&#x6B65;/&#x5F02;&#x6B65;&#x4EFB;&#x52A1;</li></ul><p><strong>6. promise&#x5F02;&#x5E38;&#x7A7F;&#x900F;&#xFF1F;</strong></p><ul><li>&#x5F53;&#x4F7F;&#x7528;promise&#x7684;then&#x94FE;&#x5F0F;&#x8C03;&#x7528;&#x65F6;,&#x53EF;&#x4EE5;&#x5728;&#x6700;&#x540E;&#x6307;&#x5B9A;&#x5931;&#x8D25;&#x7684;&#x56DE;&#x8C03;</li><li>&#x524D;&#x9762;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;&#x51FA;&#x4E86;&#x5F02;&#x5E38;, &#x4F1A;&#x4E00;&#x76F4;&#x5411;&#x540E;&#x4F20;&#x76F4;&#x5230;&#x9047;&#x5230;&#x5931;&#x8D25;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x5728;&#x5176;&#x4E2D;&#x88AB;&#x5904;&#x7406;</li></ul><p><strong>7. &#x5982;&#x4F55;&#x4E2D;&#x65AD;promise&#x94FE;&#xFF1F;</strong></p><ul><li>&#x5F53;&#x4F7F;&#x7528;promise&#x7684;then&#x94FE;&#x5F0F;&#x8C03;&#x7528;&#x65F6;,&#x5728;&#x4E2D;&#x95F4;&#x4E2D;&#x65AD;,&#x4E0D;&#x518D;&#x8C03;&#x7528;&#x540E;&#x9762;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;</li><li>&#x529E;&#x6CD5;&#xFF1A;&#x5728;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4E2D;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;pending&#x72B6;&#x6001;&#x7684;promise&#x5BF9;&#x8C61;</li></ul></section></div><div class=search-results><div class=has-results><h1 class=search-results-title><span class=search-results-count></span>results matching "<span class=search-query></span>"</h1><ul class=search-results-list></ul></div><div class=no-results><h1 class=search-results-title>No results matching "<span class=search-query></span>"</h1></div></div></div></div></div></div><a href=为何要用Promise.html class="navigation navigation-prev navigation-unique" aria-label="Previous page: 2.2 为何要用Promise"><i class="fa fa-angle-left"></i></a></div><script>var gitbook=gitbook||[];gitbook.push(function(){gitbook.page.hasChanged({page:{title:"2.3 如何使用Promise",level:"1.3.3",depth:2,next:{title:"第3章 手写Promise",level:"1.4",depth:1,ref:"",articles:[{title:"3.1 初步实现",level:"1.4.1",depth:2,path:"chapter3/初步实现.md",ref:"chapter3/初步实现.md",articles:[]},{title:"3.3 处理异常",level:"1.4.2",depth:2,path:"chapter3/处理异常.md",ref:"chapter3/处理异常.md",articles:[]},{title:"3.3 处理多回调及异步",level:"1.4.3",depth:2,path:"chapter3/处理多回调及异步.md",ref:"chapter3/处理多回调及异步.md",articles:[]},{title:"3.4 链式调用",level:"1.4.4",depth:2,path:"chapter3/链式调用.md",ref:"chapter3/链式调用.md",articles:[]},{title:"3.5 处理多次调用及可选参数",level:"1.4.5",depth:2,path:"chapter3/处理多次调用及可选参数.md",ref:"chapter3/处理多次调用及可选参数.md",articles:[]},{title:"3.5 其它功能的实现",level:"1.4.6",depth:2,path:"chapter3/其它功能的实现.md",ref:"chapter3/其它功能的实现.md",articles:[]}]},previous:{title:"2.2 为何要用Promise",level:"1.3.2",depth:2,path:"chapter2/为何要用Promise.md",ref:"chapter2/为何要用Promise.md",articles:[]},dir:"ltr"},config:{gitbook:"*",theme:"default",variables:{},plugins:[],pluginsConfig:{highlight:{},search:{},lunr:{maxIndexSize:1e6,ignoreSpecialCharacters:!1},sharing:{facebook:!0,twitter:!0,google:!1,weibo:!1,instapaper:!1,vk:!1,all:["facebook","google","twitter","weibo","instapaper"]},fontsettings:{theme:"white",family:"sans",size:2},"theme-default":{styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},showLevel:!1}},structure:{langs:"LANGS.md",readme:"README.md",glossary:"GLOSSARY.md",summary:"SUMMARY.md"},pdf:{pageNumbers:!0,fontSize:12,fontFamily:"Arial",paperSize:"a4",chapterMark:"pagebreak",pageBreaksBefore:"/",margin:{right:62,left:62,top:56,bottom:56}},styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"}},file:{path:"chapter2/如何使用Promise.md",mtime:"2020-08-20T08:14:09.230Z",type:"markdown"},gitbook:{version:"3.2.3",time:"2020-08-20T08:23:33.468Z"},basePath:"..",book:{language:""}})})</script></div><script src=../gitbook/gitbook.js></script><script src=../gitbook/theme.js></script><script src=../gitbook/gitbook-plugin-search/search-engine.js></script><script src=../gitbook/gitbook-plugin-search/search.js></script><script src=../gitbook/gitbook-plugin-lunr/lunr.min.js></script><script src=../gitbook/gitbook-plugin-lunr/search-lunr.js></script><script src=../gitbook/gitbook-plugin-sharing/buttons.js></script><script src=../gitbook/gitbook-plugin-fontsettings/fontsettings.js></script></body></html>